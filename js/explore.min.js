async function hookupViaPaystack(e,t,n){async function o(e){let n=await fetch(a,{method:"POST",headers:{Authorization:localStorage.pinkettu,"Content-Type":"application/json"},body:JSON.stringify({worker:t,cost:e})});if("Invalid User"===(n=await n.json()).message)window.location.assign(`/login.html${query}`),localStorage.removeItem("pinkettu"),localStorage.removeItem("isSubmitting");else{if(n.message)throw"";await async function(e,n){const{id:o}=e,a=`${API}/transaction`,r=document.querySelector(`[data-rate='${n}']`);alert(n);try{let e=await fetch(a,{method:"POST",headers:{Authorization:localStorage.pinkettu,"Content-Type":"application/json"},body:JSON.stringify({amount:n,client:i,hookup:o,purpose:"Hook Up"})});if(e.status>=400)throw"";e=await e.json();window.PaystackPop.setup({key:publicKey,email:e.user.email,amount:100*n,ref:o,callback:e=>(async function(e,n){e.id=t,[...n.children].forEach(e=>e.classList.toggle("hide")),n.children[0].textContent="Verifying...";const o=`${API}/transaction/verify/hookup`;try{if((await fetch(o,{method:"POST",headers:{Authorization:localStorage.pinkettu,"Content-Type":"application/json"},body:JSON.stringify(e)})).status>=400)throw"";window.location.assign("/hookups.html")}catch(e){alert(e),n[0].textContent="Network Error",localStorage.removeItem("isSubmitting")}})(e,r),onClose:()=>{console.log("Payment Closed"),toggleButtonSpinner(r,!1)},currency:"NGN"}).openIframe()}catch(e){alert(e),toggleButtonSpinner(r,!1)}}(n,e)}}if("true"===localStorage.isSubmitting)return;toggleButtonSpinner(e,!0);let a=`${API}/hookup`;const i=localStorage.getItem("pinkettu_user_id");try{await o(n)}catch(t){alert(t);const n=e.children[0].textContent;e.children[0].textContent="Network Error",setTimeout(()=>{toggleButtonSpinner(e,!1),e.children[0].textContent=n},5e3)}}function parseMoney(e){e=e.toString().split("").reverse();for(let t=0;t<e.length;t++)t%3==0&&0!==t&&(e[t]+=", ");return e=e.reverse().join("")}function createPinkProfile(e,t){const n=document.createElement("h3"),o=document.createElement("span");o.textContent=e.username;const a=document.createElement("header"),i=document.createElement("div"),r=document.createElement("span"),c=document.createElement("i");c.classList.add("material-icons"),c.textContent="near_me";const s=document.createElement("span");s.textContent=e.location||"Lagos Mainland";let l=document.createElement("div");if("true"!==localStorage.getItem("pinkettu_user_status")&&e.worker){l.classList.add("rates-container");const n=["An Hour","A Night","The Weekend"];(e.rates||[0,0,0]).forEach((e,o)=>{const a=`\n        <div class="see-more" data-rate="${e}">\n          <b>Hook Up For ${n[o]} @ â‚¦${parseMoney(e)}</b>\n          <i class="fa-spin hide">donut_large</i>\n        </div>\n      `;l.insertAdjacentHTML("beforeend",a),l.lastElementChild.onclick=(n=>{if(localStorage.getItem("pinkettu")){hookupViaPaystack(Array.from(l.children).filter(t=>parseInt(t.getAttribute("data-rate"))===e)[0],t,e)}else window.location.assign(`/login.html${query}`),localStorage.removeItem("pinkettu")})})}else l="";const d=document.createElement("div");d.classList.add("gallery"),d.append(...e.images.map(e=>{return html(`\n      <div>\n        <img src="https://images.pinkettu.com.ng/${e}">\n      </div>\n    `)})),r.appendChild(c),n.append(o),i.append(r,s),a.append(i,l);const u=document.createElement("div");u.className="show-worker-images",u.append(n,a,d);const m=document.querySelector("section.container");m.replaceChild(u,m.lastElementChild)}function loadUserProfile(){const e=query.match(/pink/)?"pink":query.match(/client/)?"client":"",t="pink"===e?query.slice(6):query.slice(8);""!==e?fetchAPink(t,e,e=>{e&&(e.username||e.images)?createPinkProfile(e,t):window.history.back()}):window.history.back()}const query=decodeURIComponent(window.location.search);""!==window.location.search?document.addEventListener("DOMContentLoaded",loadUserProfile):window.location.assign("/pinks.html");