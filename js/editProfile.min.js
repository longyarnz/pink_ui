function handleSubmitResponse(e,t){const{message:n}=JSON.parse(e.responseText);if("Invalid User"===n)return localStorage.removeItem("pinkettu"),window.location.assign("/login.html"),void toggleButtonSpinner(t,!1);toggleButtonSpinner(t,!1),window.location.assign("/profile.html")}function submitForm(e,t){function n(e,t){const n=Math.floor(100*Math.random()),o=e.name.replace(/\s/i,".");i=`${n}.${o}`,t.push(i),s=sendImagesToDatabase(e,i),r.push(s)}if(e.preventDefault(),"true"===localStorage.isSubmitting)return;const o=e.target.children.finalSubmit;toggleButtonSpinner(o,!0);const a=`${API}/profile`;let i,s,l,r=[];const[u,g,p,c,m,f,h,d]=e.target;if(l={username:u.value,phone:g.value,location:f.value,rates:[parseInt(p.value),parseInt(c.value),parseInt(m.value)],image:[],more:[]},h.files.length>0&&n(h.files[0],l.image),t&&d.files.length>0)for(let e=0;e<d.files.length;e++){n(d.files[e],l.more)}Promise.all(r).then(()=>{const e=new XMLHttpRequest;e.onreadystatechange=function(){4===this.readyState&&handleSubmitResponse(this,o)},e.open("PUT",a,!0),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Authorization",localStorage.pinkettu),e.send(JSON.stringify(l))})}