function createHookupTable(e){const t="true"===localStorage.pinkettu_user_status,n=document.createElement("div");n.classList.add("tab");const o=t?html(`\n      <div>\n        <span>${e.client.username}</span>\n        <a href="explore.html?client=${e.client._id}"><span>view profile</span></a>\n      </div>\n    `):html(`\n      <div>\n        <span>${e.worker.username}</span>\n        <a href="explore.html?pink=${e.worker._id}"><span>view profile</span></a>\n      </div>\n    `),a=html(`\n    <div>\n      <span>Hook-Up Code </span>\n      <span>${e.randomKey}</span>\n    </div>\n  `),i=document.createElement("div");i.classList.add("completed"),i.textContent="completed";const r=document.createElement("div");r.classList.add("pending"),r.textContent="pending";const s=document.createElement("div"),l=t?"Client's Secret Code":"Pink's Secret Code";s.innerHTML=`\n    <input id="secret-code" type="text" placeholder="${l}" maxlength="15" />\n    <button>VERIFY</button>\n  `,s.children[1].onclick=function(t){t.preventDefault(),completeHookup(e._id,t.target)};let c;return c=e.clientHasVerified&&e.workerHasVerified?i:t&&!e.clientHasVerified&&e.workerHasVerified?r:t||!e.clientHasVerified||e.workerHasVerified?s:r,n.append(o,a,c),n}async function completeHookup(e,t){const n=t.previousElementSibling.value;if("CHECKING..."!==t.textContent&&""!==n&&n){t.textContent="CHECKING...";try{let o=await fetch(`${API}/hookup/${e}/${n}`,{method:"PUT",headers:{Authorization:localStorage.pinkettu}});if("Invalid User"===(o=await o.json()).message)return void window.location.assign("/login.html");if(Array.isArray(o)){const e=t.parentElement;o[0]&&o[1]?(e.innerHTML="completed",e.classList.add("completed")):o[0]?o[0]&&!o[1]&&(e.innerHTML="PENDING",e.classList.add("pending")):(t.textContent="WRONG CODE",t.style.backgroundColor="#d9534f",setTimeout(()=>{t.textContent="VERIFY",t.style.backgroundColor=""},5e3))}}catch(e){t.textContent="VERIFY"}}}async function fetchUserHookups(){try{let e=await fetch(`${API}/hookup`,{headers:{Authorization:localStorage.pinkettu}});if((e=await e.json()).message)localStorage.removeItem("pinkettu"),localStorage.removeItem("pinkettu_user_status"),window.location.assign("/login.html");else{const t=document.createElement("main");if(0===e.length)t.innerHTML="\n          <h2>\n            You do not have any hook ups yet.\n          </h2>\n\n          <h1>0</h1>\n        ",t.classList.add("empty");else{const n=e.reverse().map(e=>createHookupTable(e));t.append(...n)}document.querySelector("main").replaceWith(t)}}catch(e){localStorage.removeItem("isSubmitting")}}localStorage.pinkettu?fetchUserHookups():(localStorage.removeItem("pinkettu"),window.location.assign("/login.html"));