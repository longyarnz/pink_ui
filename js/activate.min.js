function handlePaymentResponse(t){t.id=id;const e=`${API}/transaction/verify/account`,n=new XMLHttpRequest;n.onreadystatechange=function(){const t=document.querySelector("#signup-main > div > p");if(4===this.readyState&&this.status<400)t.style.fontWeight="900",t.textContent="Account Activation Completed",t.style.color="#5cb85c",localStorage.removeItem("pinkettu"),window.location.assign("/login.html");else if(4===this.readyState&&this.status>=400){const e=JSON.parse(this.responseText);t.textContent=e,t.style.color="#d9534f",toggleButtonSpinner(button,!1)}},n.open("POST",e,!0),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(t))}function handleActivationResponse(t,e){const{id:n,user:o,status:i}=JSON.parse(t.responseText);if(localStorage.removeItem("isSubmitting"),i){const t=document.querySelector("#signup-main > div > p");t.textContent=i,t.style.color="#5cb85c",t.style.fontWeight="900",toggleButtonSpinner(e,!1)}else if(n&&o){window.PaystackPop.setup({key:publicKey,email:o.email,amount:1e5,ref:n,callback:handlePaymentResponse,onClose:()=>toggleButtonSpinner(e,!1),currency:"NGN"}).openIframe()}}function activateViaPaystack(){if("true"===localStorage.isSubmitting)return;toggleButtonSpinner(button,!0);const t=`${API}/transaction/activate/${id}`,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===this.readyState)if(this.status>=400){const t=JSON.parse(this.responseText),e=document.querySelector("#signup-main > div > p"),{color:n,fontWeight:o}=e.style;e.textContent=t,e.style.color="#d9534f",e.style.fontWeight="900",setTimeout(()=>{const t=localStorage.getItem("activate_email");e.textContent="",e.innerHTML=`Check your mailbox <code>${t}</code> and verify your email before you activate your account.`,e.style.color=n,e.style.fontWeight=o},5e3),toggleButtonSpinner(button,!1)}else handleActivationResponse(this,button)},e.open("POST",t,!0),e.send()}const query=decodeURIComponent(window.location.search),id=query.slice(6);let button;document.addEventListener("DOMContentLoaded",t=>{(button=document.querySelector("button")).addEventListener("click",activateViaPaystack),document.querySelector("code").textContent=localStorage.getItem("activate_email")});