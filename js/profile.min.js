function createAddMoreInput(e=[0,0,0]){const t=document.querySelector("form"),o=document.querySelector('label[for="profile"]').cloneNode(),n=document.querySelector('input[type="file"]').cloneNode(),r=`\n    <label for="hour">Charge Per Hour (₦)</label>\n    <input id="hour" name="hour" type="number" placeholder="Hourly Rate" value="${parseInt(e[0])||0}" pattern="[0-9]*" required />\n    \n    <label for="night">Overnight Charge (₦)</label>\n    <input id="night" name="night" type="number" placeholder="Overnight Charge" value="${parseInt(e[1])||0}" pattern="[0-9]*" required />\n    \n    <label for="week">Weekend Charge (₦)</label>\n    <input id="week" name="week" type="number" placeholder="Weekend Charge" value="${parseInt(e[2])||0}" pattern="[0-9]*" required />\n    `;o.htmlFor="add-more",o.textContent="Add More Images To Attract Clients",n.id="add-more",n.name="more",n.multiple=!0,n.placeholder="Select as many as you want",t.insertBefore(o,t.children.finalSubmit),t.insertBefore(n,t.children.finalSubmit),t.children[7].insertAdjacentHTML("beforebegin",r)}async function deleteUserImage(e){try{let t=await fetch(`${API}/profile/image/${e}`,{method:"DELETE",headers:{Authorization:localStorage.pinkettu}});!0===(t=await t.json())?window.location.assign("/profile.html"):t.id&&window.location.assign(`/activate.html?user=${t.id}`)}catch(e){localStorage.removeItem("isSubmitting")}}function createGalleryForWorker(e){const t=document.querySelector("footer"),o=document.createElement("section");o.classList.add("container");const n=document.createElement("div");n.classList.add("show-worker-images");const r=document.createElement("h3");r.innerHTML=`\n    <i>local_florist</i>\n    Pictures of ${e.username}\n    <i>local_florist</i>\n  `;const a=document.createElement("div");a.classList.add("gallery");const i=e.images.slice(1).map(e=>(e=>{const t=document.createElement("div"),o=document.createElement("img");o.src=`https://images.pinkettu.com.ng/${e}`;const n=document.createElement("button");n.addEventListener("click",()=>{const t=n.querySelector("i");t.textContent="donut_large",t.classList.toggle("fa-spin"),t.style.animationDuration=".35s",deleteUserImage(e)});const r=document.createElement("i");return r.classList.add("material-icons"),r.textContent="close",n.appendChild(r),t.append(o,n),t})(e));a.append(...i),n.append(r,a),o.appendChild(n),document.body.insertBefore(o,t)}async function fetchUserProfile(){try{let e=await fetch(`${API}/profile`,{headers:{Authorization:localStorage.pinkettu}});if("User has not activated the account"===(e=await e.json()).message)window.location.assign(`/activate.html?user=${e.id}`);else if(e.message)localStorage.removeItem("pinkettu"),localStorage.removeItem("pinkettu_user_status"),localStorage.removeItem("pinkettu_user_id"),window.location.assign("/login.html");else{const t=document.querySelector("form");document.querySelector(".pic-wrapper img").src=`https://images.pinkettu.com.ng/${e.images[0]}`;const o=t.children[0];o.style.backgroundColor=e.emailIsVerified?"rgba(92, 184, 92, .1)":"rgba(255, 0, 0, .1)",o.textContent=e.emailIsVerified?`Account <${e.email}> Verified`:`Check your mailbox <${e.email}> to verify your account`,t[0].value=e.username,t[1].value=e.phone||8e8,t[2].value=e.location,localStorage.setItem("pinkettu_user_status",e.worker),localStorage.setItem("pinkettu_user_id",e.id),e.worker&&createAddMoreInput(e.rates),e.images.length>1&&createGalleryForWorker(e),t.addEventListener("submit",t=>submitForm(t,e.worker))}}catch(e){localStorage.removeItem("isSubmitting")}}const query=decodeURIComponent(window.location.search);localStorage.pinkettu&&query?window.location.assign(`/explore.html${query}`):localStorage.pinkettu?fetchUserProfile():(localStorage.removeItem("pinkettu"),window.location.assign("/login.html"));