function validatePassword(){const e=document.getElementById("pass"),t=document.getElementById("confirm");e.value!==t.value?t.setCustomValidity("Passwords Don't Match"):t.setCustomValidity("")}function createNewPassword(e){if(e.preventDefault(),"true"===localStorage.isSubmitting)return;const t=decodeURIComponent(window.location.search).slice(6),n=e.target.children.finalSubmit;toggleButtonSpinner(n,!0);const o=`${API}/auth/reset/${t}`,[s]=form,a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===this.readyState){const e=JSON.parse(this.responseText),t=document.querySelector("p");t.textContent=e,t.style.color=this.status<400?"#5cb85c":"#d9534f",toggleButtonSpinner(n,!1)}},a.open("POST",o,!0),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify({password:s.value.toLowerCase()}))}document.addEventListener("DOMContentLoaded",e=>{localStorage.removeItem("isSubmitting");const t=document.querySelector("form"),n=document.getElementById("pass"),o=document.getElementById("confirm");n.addEventListener("change",validatePassword),o.addEventListener("keyup",validatePassword),t.addEventListener("submit",createNewPassword)});